[Unit]
Description=Automatic ambient light-based brightness adjustment
Documentation=https://github.com/mbrumlow/lumd
After=graphical-session.target
PartOf=graphical-session.target

[Service]
ExecStart=%h/.nix-profile/bin/lumd
Restart=on-failure
RestartSec=5
Environment=XDG_CONFIG_HOME=%h/.config

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=lumd

# Security settings
PrivateTmp=true
NoNewPrivileges=true
ProtectSystem=strict
ProtectHome=read-only
ReadWritePaths=%h/.config/lumd
ProtectControlGroups=true
ProtectKernelModules=true
RestrictRealtime=true
RestrictSUIDSGID=true
MemoryDenyWriteExecute=true

[Install]
WantedBy=graphical-session.target